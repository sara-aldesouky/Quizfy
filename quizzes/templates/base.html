{% load static %}
<!doctype html>
<html>
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>{% block title %}Quizfy - Create Quizzes Effortlessly{% endblock %}</title>
<link rel="stylesheet" href="/static/quizzes/main.css">
<script>
  const darkMode = localStorage.getItem('darkMode') === 'true';
  if (darkMode) document.documentElement.setAttribute('data-theme', 'dark');
  else document.documentElement.removeAttribute('data-theme');
</script>
</head>
<body>
<header class="topbar">
    <div class="container">
    <div class="brand"><a href="{% url 'landing' %}" style="color: inherit; text-decoration: none;">Quizfy</a></div>

    <nav class="navbar">
        <div class="nav-left">
          <button class="hamburger" onclick="toggleMenu()" aria-label="Toggle navigation" aria-expanded="false">‚ò∞</button>
          <a href="{% url 'landing' %}" class="logo">Quizfy</a>
        </div>
      
        <div class="nav-right" id="mobile-nav">
          {% if user.is_authenticated %}
      
            {% if user.is_staff %}
              <!-- TEACHER NAV -->
              <a href="{% url 'teacher_quizzes' %}" class="nav-link">My Quizzes</a>
              <a href="{% url 'change_password' %}" class="nav-link">Change Password</a>
              <a href="{% url 'app_logout' %}" class="btn danger small">Logout</a>
      
            {% else %}
              <!-- STUDENT NAV (compact: keep Dashboard, remove duplicate Home) -->
              <a href="{% url 'student_dashboard' %}" class="nav-link">Dashboard</a>
              <a href="{% url 'change_password' %}" class="nav-link">Change Password</a>
              <a href="{% url 'app_logout' %}" class="btn danger small">Logout</a>
            {% endif %}
      
          {% else %}
            <!-- PUBLIC NAV -->
            <a href="{% url 'home' %}" class="nav-link">Home</a>
            <a href="{% url 'teacher_login' %}" class="nav-link">Teacher Login</a>
            <a href="{% url 'student_login' %}" class="nav-link">Student Login</a>
            <a href="{% url 'student_signup' %}" class="btn primary small">Sign Up</a>
          {% endif %}
          <button class="theme-toggle" onclick="toggleTheme()" title="Toggle dark/light mode">üåô</button>
        </div>
      </nav>
      
    </div>
</header>

<main class="container">
    {% if messages %}
    <div class="messages">
        {% for message in messages %}
    <div class="msg {{ message.tags }}">{{ message }}</div>
        {% endfor %}
    </div>
    {% endif %}

    {% block content %}{% endblock %}
</main>

<script>
function toggleTheme() {
  const isDark = document.documentElement.getAttribute('data-theme') === 'dark';
  if (isDark) {
    document.documentElement.removeAttribute('data-theme');
    localStorage.setItem('darkMode', 'false');
    document.querySelector('.theme-toggle').textContent = 'üåô';
  } else {
    document.documentElement.setAttribute('data-theme', 'dark');
    localStorage.setItem('darkMode', 'true');
    document.querySelector('.theme-toggle').textContent = '‚òÄÔ∏è';
  }
}
</script>
<script>
// Mobile menu toggle and entrance animations
function toggleMenu(){
  const nav = document.getElementById('mobile-nav');
  const btn = document.querySelector('.hamburger');
  if(!nav) return;
  const isOpen = nav.classList.toggle('open');
  btn.setAttribute('aria-expanded', isOpen);
}

document.addEventListener('DOMContentLoaded', function(){
  // staggered entrance for cards
  document.querySelectorAll('.card').forEach(function(el, idx){
    setTimeout(function(){ el.classList.add('animate-in'); }, idx * 70);
  });

  // close mobile menu on resize to larger screens
  window.addEventListener('resize', function(){
    if(window.innerWidth > 600){
      const nav = document.getElementById('mobile-nav');
      if(nav) nav.classList.remove('open');
      const btn = document.querySelector('.hamburger');
      if(btn) btn.setAttribute('aria-expanded', 'false');
    }
  });
});
</script>
</body>
</html>
